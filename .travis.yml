language: python

python:
  - '3.6'

install:
  - pip install -U pytest pytest-cov codecov flake8
  - pip install -e .

script:
  - pytest --cov
  - python3 -m flake8 --exclude=build,doc,example,tmp

after_success:
  - codecov

deploy:
  provider: pypi
  user: dweindl
  password:
    secure: "kI9FtMN+a8HP3/E81CtWM0JKU48RmVuC5I+gMv77Bf2TkhdLNYI6IccNRwNDD1B4eCTIg6mqzWFJHnpwDIQnZ3KR0D6dmzLC51KbV1ksvhvq9phVN8y87EwUcfVfN9cceSefjS0cTledjVBIbKI+X79PBSzlWIVjPZbcTAtvn1hD0Ok07Ku5/B/+CuIUTWeAFIvYf77TQ1X2DXLfYEUjfsLSPNVBTok85WyfMaqurAL+RE3+EDh72wYOja5XYMSxqwB4l1tnRanj6RZC3NYX97w6nKvw5Bx0e3iQphD9iGGaGuqahnue0E3cwNyL3eTIfAGpUOwSGOdjW1eaUMqiJIUbHX7zor4vM4NBCJMDMH0x+o2tVFiY7Zhvr/B6bk7dvHKTMuEKfrvsXDxNhuiD1MMCZwGl1Y1P30S4X2P8eVqHfKgQTjPz6SMkgnVYSFGNOJN07EQaFbdRYO5rKb6ERXgxUl3EwKxPxDp4AkY+yujPxy6pQhEHl3sf91ERm3H4enK4OpvsbSMvfNSoBf3gt4iemr96P63qo3gg8kj62FQ2UaZXlKG9bfHzCa0Re6/bRJ/XXqv/mQB5dIDjnS53Ge/KVf68WJh6Eb8Cf+RfpSZ2qMsuMTHmFRZJH5Hu2K5ug6rr2gob7mOiy17KGORQo7PmTV32zZczhslpJOXog8k="
  on:
    branch: master
    tags: true
